<?phpclass MaterialsController extends BackendAppController {
	var $name = 'Materials';	var $uses = array('Backend.Product', 'Backend.Material',);	var $components = array('Session', 'Auth', 'Backend.General');	var $paginate = array();
	function beforeFilter(){		parent::beforeFilter();	}
	 function create( $material_id = null ) {			// breadcrumb define		$breadcrumb['Home'] = Configure::read('AdminSiteUrl').'dashboard';		$breadcrumb['Materials'] = Configure::read('AdminSiteUrl').'/materials/index';		$breadcrumb['Create'] = 'javascript:void(0)';		$this->set('breadcrumb', $breadcrumb);		
		if(!empty($this->data)){			$this->Material->set($this->data);			$this->Material->setValidation('NewMaterial');			if($this->Material->validates()){				$this->request->data['Material']['url'] = $this->General->parseSlug($this->data['Material']['name']);				if(empty($material_id)){					$this->Material->create();				}				$this->Material->save($this->data);				if(empty($material_id)){					$this->Session->setFlash(__('Material has been created.'), null, null,'success');				}else{					$this->Session->setFlash(__('Material has been updated.'), null, null,'success');				}				$this->redirect(array('controller'=>'materials', 'action'=>'index'));				}		}else{			if(!empty($material_id)){				$this->request->data = $this->Material->findById( $material_id );			}		}	}
	function index() {		// breadcrumb define		$breadcrumb['Home'] = Configure::read('AdminSiteUrl').'dashboard';		$breadcrumb['Material'] = 'javascript:void(0)';		$breadcrumb['Home'] = Configure::read('AdminSiteUrl').'materials/index';				$this->set('breadcrumb', $breadcrumb);		$material_data = $this->paginate('Material');				$this->set('material_data', $material_data);	}	/*Delete the material status*/
	function delete_material( $material_id = null){		if(!empty($material_id)){			$this->Material->deleteAll(				array('Material.id'=>$material_id)			);		}		$this->Session->setFlash(__('Material has been deleted'), null, null, 'success');		$this->redirect(array('controller'=>'materials', 'action'=>'index'));	}		/*Change the martrial status*/
	function change_status_material( $material_id = null, $status = null ){		if(empty($status)){			$status = 0;		}		if(!empty($material_id)){				$this->Material->updateAll(						array('Material.enabled'=> $status),						array('Material.id'=> $material_id)					);		}		$this->Session->setFlash(__('Material status has been updated.'), null, null,'success');		$this->redirect(array('controller'=>'materials', 'action'=>'index'));	}
};?>